<div class="maid-profile-page">
  <!-- Profile Header -->
  <div class="profile-header bg-light py-4">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
              <li class="breadcrumb-item"><a routerLink="/search">Find Maids</a></li>
              <li class="breadcrumb-item active" aria-current="page">{{ maid?.firstName }} {{ maid?.lastName }}</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="container py-4" *ngIf="maid">
    <div class="row">
      <!-- Maid Profile Card -->
      <div class="col-lg-4 mb-4">
        <div class="card shadow-sm sticky-top" style="top: 2rem;">
          <div class="card-body text-center">
            <img [src]="maid.profileImage || 'assets/images/default-maid.jpg'" 
                 [alt]="maid.firstName + ' ' + maid.lastName" 
                 class="rounded-circle mb-3" 
                 style="width: 150px; height: 150px; object-fit: cover;">
            
            <h4 class="card-title">{{ maid.firstName }} {{ maid.lastName }}</h4>
            <p class="text-muted">{{ maid.nationality }} • {{ maid.age }} years old</p>
            
            <div class="mb-3">
              <div class="rating mb-2">
                <i class="fa fa-star text-warning" *ngFor="let star of [1,2,3,4,5]"></i>
              </div>
              <p class="text-muted small">{{ maid.rating }} ({{ maid.totalReviews }} reviews)</p>
            </div>
            
            <div class="mb-3">
              <span class="badge bg-success" *ngIf="maid.isVerified">
                <i class="fa fa-check-circle me-1"></i>Verified
              </span>
              <span class="badge bg-primary ms-2">{{ maid.availability | titlecase }}</span>
            </div>
            
            <div class="mb-4">
              <h3 class="text-primary">AED {{ maid.hourlyRate }}/hour</h3>
              <p class="text-muted small">{{ maid.experience }} years experience</p>
            </div>
            
            <button class="btn btn-primary btn-lg w-100 mb-3" (click)="openBookingModal()">
              <i class="fa fa-calendar me-2"></i>Book Now
            </button>
            
            <button class="btn btn-outline-primary w-100" (click)="toggleFavorite()" [class.btn-danger]="isFavorite">
              <i class="fa" [class.fa-heart]="isFavorite" [class.fa-heart-o]="!isFavorite" me-2></i>
              {{ isFavorite ? 'Remove from Favorites' : 'Save to Favorites' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Maid Details -->
      <div class="col-lg-8">
        <!-- About Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-user me-2"></i>About {{ maid.firstName }}</h5>
          </div>
          <div class="card-body">
            <p class="lead">{{ maid.bio }}</p>
            
            <div class="row">
              <div class="col-md-6">
                <h6 class="fw-semibold">Location</h6>
                <p class="text-muted">
                  <i class="fa fa-map-marker-alt me-2"></i>
                  {{ maid.location.address }}, {{ maid.location.city }}, {{ maid.location.country }}
                </p>
              </div>
              <div class="col-md-6">
                <h6 class="fw-semibold">Languages</h6>
                <div class="d-flex flex-wrap gap-1">
                  <span class="badge bg-light text-dark" *ngFor="let language of maid.languages">
                    {{ language }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Skills Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-tools me-2"></i>Skills & Services</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6" *ngFor="let skill of maid.skills">
                <div class="d-flex align-items-center mb-2">
                  <i class="fa fa-check-circle text-success me-2"></i>
                  <span>{{ skill }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Experience & Certifications Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-briefcase me-2"></i>Experience & Certifications</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <h6 class="fw-semibold">Work Experience</h6>
                <p class="text-muted">{{ maid.experience }} years of professional experience</p>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <i class="fa fa-check-circle text-success me-2"></i>
                    <strong>House Cleaning:</strong> 5+ years
                  </li>
                  <li class="mb-2">
                    <i class="fa fa-check-circle text-success me-2"></i>
                    <strong>Cooking:</strong> 4+ years
                  </li>
                  <li class="mb-2">
                    <i class="fa fa-check-circle text-success me-2"></i>
                    <strong>Child Care:</strong> 3+ years
                  </li>
                </ul>
              </div>
              <div class="col-md-6">
                <h6 class="fw-semibold">Certifications</h6>
                <ul class="list-unstyled">
                  <li class="mb-2">
                    <i class="fa fa-certificate text-primary me-2"></i>
                    First Aid Certified
                  </li>
                  <li class="mb-2">
                    <i class="fa fa-certificate text-primary me-2"></i>
                    Food Safety Certificate
                  </li>
                  <li class="mb-2">
                    <i class="fa fa-certificate text-primary me-2"></i>
                    Child Care Training
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Availability & Schedule Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-calendar-alt me-2"></i>Availability & Schedule</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <h6 class="fw-semibold">Current Status</h6>
                <span class="badge bg-success fs-6">{{ maid.availability | titlecase }}</span>
                <p class="text-muted mt-2">Available for immediate booking</p>
              </div>
              <div class="col-md-6">
                <h6 class="fw-semibold">Preferred Working Hours</h6>
                <ul class="list-unstyled">
                  <li><i class="fa fa-clock me-2"></i>Morning: 8:00 AM - 12:00 PM</li>
                  <li><i class="fa fa-clock me-2"></i>Afternoon: 2:00 PM - 6:00 PM</li>
                  <li><i class="fa fa-clock me-2"></i>Evening: 7:00 PM - 10:00 PM</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Booking History Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-calendar-check me-2"></i>Recent Bookings</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="table-light">
                  <tr>
                    <th>Date</th>
                    <th>Service</th>
                    <th>Duration</th>
                    <th>Status</th>
                    <th>Amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let booking of maidBookings">
                    <td>{{ booking.startDate | date:'short' }}</td>
                    <td>{{ booking.workType | titlecase }}</td>
                    <td>{{ booking.duration }} hours</td>
                    <td>
                      <span class="badge" [ngClass]="{
                        'bg-success': booking.status === 'completed',
                        'bg-warning': booking.status === 'pending',
                        'bg-info': booking.status === 'confirmed',
                        'bg-danger': booking.status === 'cancelled'
                      }">{{ booking.status | titlecase }}</span>
                    </td>
                    <td class="fw-bold text-primary">AED {{ booking.totalAmount }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="text-center mt-3">
              <small class="text-muted">Showing recent bookings for {{ maid.firstName }}</small>
            </div>
          </div>
        </div>

        <!-- Reviews Section -->
        <div class="card shadow-sm mb-4">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-star me-2"></i>Reviews ({{ maid.totalReviews }})</h5>
          </div>
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-6">
                <div class="text-center">
                  <h2 class="text-primary">{{ maid.rating }}</h2>
                  <div class="rating mb-2">
                    <i class="fa fa-star text-warning" *ngFor="let star of [1,2,3,4,5]"></i>
                  </div>
                  <p class="text-muted">Average Rating</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="rating-breakdown">
                  <div class="d-flex align-items-center mb-1" *ngFor="let rating of [5,4,3,2,1]">
                    <span class="me-2">{{ rating }}★</span>
                    <div class="progress flex-grow-1 me-2" style="height: 8px;">
                      <div class="progress-bar bg-warning" [style.width.%]="getRatingPercentage(rating)"></div>
                    </div>
                    <span class="text-muted small">{{ getRatingCount(rating) }}</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sample Reviews -->
            <div class="review-item border-bottom pb-3 mb-3" *ngFor="let review of sampleReviews">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <div>
                  <h6 class="mb-1">{{ review.reviewerName }}</h6>
                  <div class="rating">
                    <i class="fa fa-star text-warning" *ngFor="let star of [1,2,3,4,5]"></i>
                  </div>
                </div>
                <small class="text-muted">{{ review.date }}</small>
              </div>
              <p class="mb-0">{{ review.comment }}</p>
            </div>

            <button class="btn btn-outline-primary">View All Reviews</button>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="card shadow-sm">
          <div class="card-header">
            <h5 class="mb-0"><i class="fa fa-phone me-2"></i>Contact Information</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <h6 class="fw-semibold">Response Time</h6>
                <p class="text-muted">Usually responds within 2 hours</p>
              </div>
              <div class="col-md-6">
                <h6 class="fw-semibold">Availability</h6>
                <p class="text-muted">Monday - Sunday, 8:00 AM - 8:00 PM</p>
              </div>
            </div>
            <div class="mt-3">
              <button class="btn btn-outline-primary me-2">
                <i class="fa fa-phone me-2"></i>Call Now
              </button>
              <button class="btn btn-outline-primary">
                <i class="fa fa-envelope me-2"></i>Send Message
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Booking Modal -->
  <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="bookingModalLabel">Book {{ maid?.firstName }} {{ maid?.lastName }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="bookingForm">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Service Date</label>
                <input type="date" formControlName="serviceDate" class="form-control" required>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Service Time</label>
                <select formControlName="serviceTime" class="form-select" required>
                  <option value="">Select Time</option>
                  <option value="08:00">8:00 AM</option>
                  <option value="09:00">9:00 AM</option>
                  <option value="10:00">10:00 AM</option>
                  <option value="11:00">11:00 AM</option>
                  <option value="12:00">12:00 PM</option>
                  <option value="13:00">1:00 PM</option>
                  <option value="14:00">2:00 PM</option>
                  <option value="15:00">3:00 PM</option>
                  <option value="16:00">4:00 PM</option>
                  <option value="17:00">5:00 PM</option>
                  <option value="18:00">6:00 PM</option>
                  <option value="19:00">7:00 PM</option>
                </select>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Duration (Hours)</label>
                <select formControlName="duration" class="form-select" required>
                  <option value="">Select Duration</option>
                  <option value="2">2 hours</option>
                  <option value="4">4 hours</option>
                  <option value="6">6 hours</option>
                  <option value="8">8 hours</option>
                  <option value="12">12 hours</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Service Type</label>
                <select formControlName="serviceType" class="form-select" required>
                  <option value="">Select Service</option>
                  <option value="house-cleaning">House Cleaning</option>
                  <option value="cooking">Cooking</option>
                  <option value="child-care">Child Care</option>
                  <option value="elderly-care">Elderly Care</option>
                  <option value="laundry">Laundry</option>
                  <option value="general">General Housework</option>
                </select>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Special Instructions</label>
              <textarea formControlName="specialInstructions" class="form-control" rows="3" 
                        placeholder="Any special requirements or instructions..."></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Your Contact Information</label>
              <div class="row">
                <div class="col-md-6 mb-2">
                  <input type="text" formControlName="customerName" class="form-control" placeholder="Your Name" required>
                </div>
                <div class="col-md-6 mb-2">
                  <input type="tel" formControlName="customerPhone" class="form-control" placeholder="Phone Number" required>
                </div>
              </div>
            </div>
            
            <div class="alert alert-info">
              <h6>Booking Summary</h6>
              <p class="mb-1"><strong>Service:</strong> {{ bookingForm.get('serviceType')?.value || 'Not selected' }}</p>
              <p class="mb-1"><strong>Date:</strong> {{ bookingForm.get('serviceDate')?.value || 'Not selected' }}</p>
              <p class="mb-1"><strong>Time:</strong> {{ bookingForm.get('serviceTime')?.value || 'Not selected' }}</p>
              <p class="mb-1"><strong>Duration:</strong> {{ bookingForm.get('duration')?.value || 'Not selected' }} hours</p>
              <p class="mb-0"><strong>Total Cost:</strong> <span class="text-primary fw-bold">AED {{ calculateTotal() }}</span></p>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" (click)="submitBooking()" [disabled]="!bookingForm.valid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            <i *ngIf="!isLoading" class="fa fa-check me-2"></i>
            {{ isLoading ? 'Processing...' : 'Confirm Booking' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

